---
title: "剑指 Offer 15. 二进制中1的个数"
subtitle: "LeetCode 刷题笔记"
layout: post
author: "L Hondong"
header-img: "img/post-bg-12.jpg"
mathjax: ture
tags:
  - LeetCode
  - 算法
---

# 剑指 Offer 15. 二进制中1的个数

## 题目

编写一个函数，输入是一个无符号整数（以二进制串的形式），返回其二进制表达式中数字位数为 '1' 的个数（也被称为 汉明重量).）。

## 示例

示例 1:

```
输入：n = 11 (控制台输入 00000000000000000000000000001011)
输出：3
解释：输入的二进制串 00000000000000000000000000001011 中，共有三位为 '1'。
```

示例 2:

```
输入：n = 128 (控制台输入 00000000000000000000000010000000)
输出：1
解释：输入的二进制串 00000000000000000000000010000000 中，共有一位为 '1'。
```

示例 3：

```
输入：n = 4294967293 (控制台输入 11111111111111111111111111111101，部分语言中 n = -3）
输出：31
解释：输入的二进制串 11111111111111111111111111111101 中，共有 31 位为 '1'。
```

## 笔记

### 方法一：逐位判断

根据与运算定义，设二进制数字 n ，则有：

- 若 n&1=0，则 n 二进制最右一位为 0；
- 若 n&1=1，则 n 二进制最右一位为 1。

例：10&1=00001010&00000001=0，最后一位为 0。

根据以上特点，判断 n 最右一位是否为 1，根据结果计数。将 n 右移一位（本题要求把数字 n 看作无符号数，因此使用无符号右移操作）。

#### 时间复杂度 

$O(log_2n)$ ： 此算法循环内部仅有移位、与、加等基本运算，占 $O(1)$；逐位判断需循环 $log_2n$ 次，其中 $log_2n$ 代表数字 n 最高位 1 的所在位数（例如 $log_24=2,log_216=4$）。

```python
class Solution(object):
    def hammingWeight(self, n):
        """
        :type n: int
        :rtype: int
        """
        res = 0
        while n:
            if n & 1 == 1: res += n & 1
            n >>= 1
        return res
```

### 方法二：巧用 n&(n−1)

- (n−1)：二进制数字 n 最右边的 1 变成 0，此 1 右边的 0 都变成 1。
- n&(n−1) ：二进制数字 n 最右边的 1 变成 0 ，其余不变。

<div align=center><img src="/Assets/Images/剑指Offer15-二进制中1的个数-2022-02-07-21-05-34.png" alt="剑指Offer15-二进制中1的个数-2022-02-07-21-05-34" style="zoom:50%;" /></div>

#### 时间复杂度 

O(M)：n&(n−1) 操作仅有减法和与运算，占用 O(1)；设 M 为二进制数字 n 中 1 的个数，则需循环 M 次（每轮消去一个 1 ），占用 O(M)。

```python
class Solution(object):
    def hammingWeight(self, n):
        """
        :type n: int
        :rtype: int
        """
        res = 0
        while n:
            res += 1
            n &= (n-1)
        return res
```
